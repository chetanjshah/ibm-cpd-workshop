---
title: Apache OpenWhisk Setup
date: 1970-01-06
---

![](assets/serverless_flow_1.png)

## Apache OpenWhisk using IBM Cloud Functions

Overview/description

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

https://cloud.ibm.com/functions/

https://openwhisk.apache.org/

## Create the IBM Cloud Functions action
Now let's create the web action that will make queries against our Discovery collection.

Start the **IBM Cloud Functions** service by selecting **Create Resource** from the IBM Cloud dashboard. Enter **functions** as the filter [1], then select the **Functions** card [2]:

![](assets/functions-cloud-catalog-search.png)
![](assets/functions-cloud-catalog.png)

From the **Functions** main panel, click on the **Actions** tab. Then click on *Create*.

![](assets/functions-actions.png)

From the **Create** panel, select the **Create Action** option.

![](assets/functions-create-1.png)

On the **Create Action** panel, provide a unique **Action Name** [1], keep the default package [2], and select the **Node.js 10** [3] runtime. Click the **Create** button [4] to create the action.

![](assets/functions-create-2.png)

Once your action is created, click on the **Code** tab [1]:

![](assets/functions-code-1.png)

In the code editor window [2], cut and paste in the code from the `disco-action.js` file found in the `actions` directory of your local repo. The code is pretty straight-forward - it simply connects to the Discovery service, makes a query against the collection, then returns the response.

![](assets/functions-code-2.png)

If you press the **Invoke** button [3], it will fail due to credentials not being defined yet. We'll do this next.

![](assets/functions-code-error.png)

Select the **Parameters** tab [1]:

![](assets/functions-parameters-empty.png)

Add the following keys:

* url
* environment_id
* collection_id
* iam_apikey

![](assets/functions-parameters-1.png)

For values, please use the values associated with the Discovery service you created in the previous step.

> Note: Make sure to enclose your values in double quotes.

![](assets/functions-parameters-2.png)

Now that the credentials are set, return to the **Code** panel and press the **Invoke** button again. Now you should see actual results returned from the Discovery service:

![](assets/functions-code-results.png)

Next, go to the **Endpoints** panel [1]:

![](assets/functions-endpoints-1.png)

Click the checkbox for **Enable as Web Action** [2]. This will generate a public endpoint URL [3].

Take note of the REST API endpoint value [3], as this will be needed by Watson Assistant in a future step.

![](assets/functions-endpoints-2.png)

To verify you have entered the correct Discovery parameters, execute the provied `curl` command [4]. If it fails, re-check your parameter values.

> NOTE: An IBM Cloud Functions service will not show up in your dashboard resource list. To return to your defined Action, you will need to access Cloud Functions by selecting Create Resource from the main dashboard panel (as shown at the beginning of this step).



